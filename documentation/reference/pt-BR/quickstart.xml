<?xml version='1.0' encoding="iso-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" []>
<chapter id="behave-quickstart">
	<title>Roteiro Rápido</title>

	<para>
		Esta seção apresenta um roteiro rápido para criação e
		configuração de um projeto com uso do framework Demoiselle Behave.
	</para>
	<section>
		<title>Pré Requisitos de Uso</title>
		<orderedlist numeration="arabic">
			<listitem>
				<para>
					Eclipse 4.2 (Juno) -
					<ulink
						url="http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/SR2/eclipse-jee-juno-SR2-linux-gtk.tar.gz">Link para download
					</ulink>
				</para>
			</listitem>
			<listitem>
				<para>
					Plugin para Maven no Eclipse ou Maven na linha de comando
					(mvn)
				</para>
			</listitem>
			<listitem>
				<para>
					Linux
				</para>
			</listitem>
			<listitem>
				<para>
					JDK 1.6
				</para>
			</listitem>
		</orderedlist>
	</section>
	<section>
		<title>Configurando o Arquétipo</title>
		<para>
			O framework Demoiselle Behave disponibiliza um arquétipo Maven
			para faciliar a criação de projetos.
			O primeiro passo na configuração
			do arquétipo consiste em configurar o repositório. Para tanto deve ser acessado o menu
			Windows>Preferences do Eclipse.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/menupreference.png" align="center"
						format="PNG" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/menupreference.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Menu de Preferência.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			O próximo passo deverá ser o acionamento do botão Add Remote Catalog.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/preferences.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/preferences.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<caption>
					<para>Clicar no botão Add Remote Catalog.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Em seguida deverá ser informado no campo Catalog File url:
			<emphasis>
				http://demoiselle.sourceforge.net/repository/archetype-catalog.xml
			</emphasis>
			No campo Description informe:
			<emphasis>
				Framework Demoiselle
			</emphasis>
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/remotecatalog.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/remotecatalog.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<caption>
					<para>Preenchendo Catálogo Remoto.
					</para>
				</caption>
			</mediaobject>
		</para>
	</section>
	<section>
		<title>Criação do Projeto</title>
		<para>
			O primeiro passo na criação de um projeto Demoisele-Behave é
			criar um projeto Maven com o arquétipo adequado ao projeto de testes.
			Neste tutorial será utilizado o arquétipo jbehave-selenium-archetype.
			O primeiro passo é escolher a opção File>New>Other>Maven>Maven
			Project.

		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/criandoprojeto1.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/criandoprojeto1.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Escolhendo Maven Project.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Escolher o catálogo Demoisele-Behave e escolher o arquétipo do
			Selenium.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/arquetipo.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/arquetipo.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Escolhendo o arquétipo jbehave-selenium-archetype.
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Preencher o Group Id e Artifact Id e finalize a criação do
			projeto.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/criandoprojeto3.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/criandoprojeto3.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Escolhendo o arquétipo jbehave-selenium-archetype.
					</para>
				</caption>
			</mediaobject>
		</para>
	</section>
	<section>
		<title>Estrutura de diretórios</title>
		<para>
			O projeto criado a partir do arquétipo possui os diretórios
			src/test/java e src/test/resources. No diretório src/test/resource
			estarão contidas as histórias de usuários. No diretório src/test/java
			estarão contidos os Steps do demoiselle bem como os objetos
			responsáveis pela identificação das telas envolvidas nos testes e
			seus objetos.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/diretorioprojeto1.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/diretorioprojeto1.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Estrutura de pastas do projeto criado a partir do arquétipo.
					</para>
				</caption>
			</mediaobject>
		</para>
	</section>
	<section>
		<title>Executando Teste</title>
		<para>
			A classe MyTest é responsável pela configuração da pasta onde
			estão localizadas as histórias de usuários bem como os passos (Steps)
			a serem adicionados ao projeto.
		</para>

		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/classeapptest.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/classeapptest.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Classe MyTest.</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			O projeto criado já possui um exemplo que realiza vários passos no site do Demoiselle Behave. Para executar o teste basta clicar com o botão direito na
			classe MyTest e escolher Run as>JUnit Test.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/executandoteste.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/executandoteste.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Classe MyTest
					</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			O framework inicia o Driver e abre o navegador. As ações das
			histórias poderão ser vistas no console da IDE como na imagem abaixo.
		</para>
		<para>
			<mediaobject>
				<imageobject role="fo">
					<imagedata fileref="images/console1.png" align="center"
						format="PNG" scalefit="1" width="75%" />
				</imageobject>
				<imageobject role="html">
					<imagedata fileref="images/console1.png" align="center"
						format="PNG" />
				</imageobject>
				<caption>
					<para>Saída do console</para>
				</caption>
			</mediaobject>
		</para>
		<para>
			Abaixo segue a história executada pelo framework:
			<programlisting>Funcionalidade: Acesso ao Projeto Demoiselle Behave

Narrativa:
Para obter informações sobre o projeto Demoiselle Behave
Como um visistante
Desejo ter acesso a documentação, fórum e demais informações sobre o projeto

Cenário: Site do DBehave
Dado que vou para a tela "dbehave"
Então será exibido "dbehave - projeto mantido pelo SERPRO"

Cenário: Lendo dúvidas
Dado que vou para a tela "Github"
Então será exibido "Demoiselle Behave"
Então será exibido "http://dbehave.com"

Quando clico em "Dúvidas e Questões"
Então será exibido "New issue"</programlisting>
		</para>
		<para>
			Por exemplo, no segundo cenário, o framework associa o link
			<emphasis>"Dúvidas e Questões"</emphasis>
			com o elemento linkIssues da classe MyPages criada
			de forma a
			mapear os
			objetos da tela. O Elemento
			locatorType
			informa o
			tipo de
			reconhecimento de objetos que será utilizado
			no
			framework. No
			exemplo, será localizado o elemento cujo XPath seja 
			"//a//span[./text()='Issues']".

		</para>
		<programlisting>@ScreenMap(name = "Github", location = "https://github.com/demoiselle/behave")
	public class Main {

		@ElementMap(name = "Dúvidas e Questões", locatorType = ElementLocatorType.XPath, locator = "//a//span[./text()='Issues']")
		private Link linkIssues;

		@ElementMap(name = "uma dúvida", locatorType = ElementLocatorType.XPath, locator = "(//a[contains(@class, 'issue-title')])[2]")
		private Link linkIssue;
	}</programlisting>
	</section>

</chapter>
